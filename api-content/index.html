{"posts":[{"title":"HI,陌生人","content":"每天你都有机会跟别人擦身而过，你也许对他一无所知，不过也许有一天，他会变成一个朋友或者是知己。by《重庆森林》","link":"https://aoianz.github.io/post/mate/"},{"title":"朝花夕拾 Mysql","content":"2.1数据库基础知识1.Dos登录命令:mysql-hhostname-uusername-p例如:mysql-h123-uroot-p简写:mysql-uroot-p复合主键就是指你表的主键含有一个以上的字段组成&gt;createtabletest&gt;(&gt;namevarchar(19),&gt;idnumber,&gt;valuevarchar(10),&gt;primarykey(name,id)&gt;)上面的name和id字段组合起来就是你test表的复合主键它的出现是因为你的name字段可能会出现重名，所以要加上ID字段这样就可以保证你记录的唯一性一般情况下，主键的字段长度和字段数目要越少越好2.1.1创建和查看数据库创建数据库语法:createdatabase数据库名称;createdatabaseitcast;/*创建数据库itcast:*/查看数据库语法:showdatabases/*查看数据库*/查看某个数据库语法:showcreatedatabase数据库名称;例如:showcreatedatabaseitcase;/*查看数据库itcase信息*/使用数据库语法:use数据库名称;例如:useitcast;/*使用数据库itcast*/2.1.2修改数据库alter数据库名称;修改数据库语法:alterdatabase数据库名称defaultcharacterset编码方式collate编码方式_bin例如:修改数据库,将数据库itcast的编码修改为gbk&gt;alterdatabaseitcastdefaultcharactersetgbkcollategbk_bin;2.1.3删除数据库语法:dropdatabase数据库名称;例如:dropdatabaseitcast;/*删除名称为itcast的数据库*/2.2数据类型2.2.1整数类型1.在MySQL数据库中，经常需要存储整数数值。根据数值取值范围的不同，MySQL中的整数类型可分为5种，分别是TINYINTtinyint、SMALLINT、MEDIUMINT、INT和BIGINT。不同整数类型的取值范围可以根据字节数计算出来，例如，TINYINT类型的整数占用1个字节，1个字节是8位，那么，TINYINT类型无符号数的最大值就是28-1，即255。同理可以算出其它不同整数类型的取值范围。**注意:**在足够使用的情况下选择选择尽量小的数据类型2.2.2浮点数类型与定点数类型2.在MySQL数据库中，存储的小数都是使用浮点数和定点数来表示的。浮点数的类型有两种，分别是单精度浮点数类型(float)和双精度浮点类型(double)。而定点数类型只有decimal，类型。浮点型:非精准数据类型,有误差定点型:精准类型2.2.3日期与时间类型3.为了方便在数据库中存储日期和时间，MySQL提供了表示日期和时间的数据类型,分别是YEAR、DATE、TIME、DATETIME和timestampyear:1字节例如:year2014='2014'p35'00'~'69'20??58=2058'70'~'99'19??89=19891.YEAR类型:(字符串类型与数字类型)'2020'2020'00-99'1-992.DATE类型:'2020-06-21''20200621'current_data或now()/表示当前日期/3.TIME类型:表示时间值格式:HH:MM:SScurrent_data或now()表示当前系统时间4.DATATIME类型now()表示当前日期和时间5.TIMESTAMP类型与DATATIME类型显示形式相似,但取值范围比DATATIME类型小2.2.4字符串和二进制类型为了存储字符串、图片和声音等数据，MySQL提供了字符串和二进制类型。包括CHAR和VARCHAR类型、BINARY和VARBINARY类型、TEXT类型、BLOB类型ENUM类型、SET类型和BIT类型1.CHAR和VARCHAR类型:​CHAR和VARCHAR类型都用来表示字符串数据,VARCHAR可以储存可变字符串语法:CHAR(M)或VARVCHAR(M)M指字符串的最大长度;VARCHAR(4)所对应的数据所占用的字节数为实际长度加1;char:浪费时间,但查询速度快;varchar:节约空间,但查询速度慢''''4个字节''1个字节'ab''ab'4个字节'ab'2个字节'abc''abc'4个字节'abc'3个字节'abcd''abcd'4个字节'abcd'4个字节'abcdef''abcd'4个字节'abcd'5个字节2.BINARY和VARBINARY类型:​BINARY和VARBINARY类型类似CHAR和VARCHAR类型,不同的是,它们表示二进制数据语法:BINARY(M)或VARBINARY(M)M指二进制数据的最大字节长度;注意:BINARY类型的长度是固定的,如果数据的长度不足最大长度,将在数据的后面用&quot;\\0&quot;补齐,最终达到指定长度.例如,指定数据的类型是BINARY(3),当插入a时,实际储存的数据为&quot;a\\0\\0&quot;,当插入ab时,实际储存的数据是&quot;ab\\0&quot;;3.TEXT类型:TEXT类型用来表示大文本数据,例如,文章内容、评论等,它的类型分为4种;数据类型储存范围数据类型储存范围TINYTEXT0-255字节MEDIUMTEXT0-16777215字节TEXT0-65535字节LONGTEXT0-4294967295字节4.BLOB类型:​BLOB类型是一种特殊的二进制类型,它用于表示数据量大很大的二进制数据,例如图片、PDF文档等数据类型储存范围数据类型储存范围TINYBLOB0-255字节MEDIUMBLOB0-16777215BIOB0-65535字节LONGBILOB4294967295注意:BLOB类型数据是根据二进制编码进行比较和排序,而TEXT类型数据是根据文本模式进行比较和排序5.ENUM类型:ENUM类型又称为枚举类型ENUM('值1','值2','值3',...'值n')注意:MYSQL中存入的是这个顺序编号,而不是列表中的值6.SET类型:SET类型用于表示字符串对象,它的值可以有零个或多个,SET类型数据的定义格式与ENUM类型相似语法:SET('值1','值2','值3',...'值n')注意:MYSQL中存入的是这个顺序编号,而不是列表中的值7.BIT类型:​用于表示二进制数据语法:BIT(M)M用于表示每个值的位数,范围是1-64;注意:如果分配的BIT(M)类型的数据的长度小于M,将在数据的左边用0补齐例如,为BIT(6)分配值b'101'与分配b'000101'相同2.3创建数据表createdatabasestudent;/*创建名为student*/useitcase;/*使用数据库*/createTABLEtb_grade/*创建名为tb_gradea的数据表*/(idINT(11),/*举例*/nameVARCHER(20),gradeFLOAT);showtables;/*验证数据库是否创建成功*/showcreatetabletb_greade;/*查看数据表创建时的定义语句,查看表的字符编码*/describetb_greade;/*查看表的字段信息,包括字段名、字段类型等信息*/修改数据表​1.修改表名;altertable表名rename新表名;altertabletb_graderename(to)grade;​2.修改字段名;altertable表名change旧字段名新字段名新数据类型;altertablegradechangenameusernameverchar(20);/*name字段改为username,数据类型保持不变*/descgreade;/*验证*/​3.修改字段的数据类型;altertable表名modify字段名数据类型;altertablegrademodifyidint(20);/**/​4.添加字段;altertable表名add新字段名数据类型[约束条件][first|after已存在的字段名]altertablegradeaddageint(10);altertablegradeaddageint(10)first;/*添加到第一位*/altertablegradeaddageint(10)afterid;/*添加到id后面*/altertablegradeaddageint(10)notnullfirst;/*不允许为空*/​5.删除字段;altertable表名drop字段名;altertablegradedropage;​6.修改字段的排列位置;altertable表名modify字段名1数据类型first|after字段名2;字段名1指要修改位置的字段;first是可选参数,指的是将字段1修改为表的第一个字段;after字段名2是将字段1插入到字段2后面;altertablegrademodifyidint(10)aftergrade;/*将id字段插入到grade字段后面*/删除数据表droptable表名;droptablegrade;desctablegrade;/*验证*/2.4表的约束防止数据表中插入错误的数值,而定义的维护数据库完整性的规则约束条件说明PRIMARYKEY主键约束，用于唯一标识对应的记录(主键唯一表示,值不能为空null);FOREIGNKEY外键约束NOTNULL非空约束UNIQUE唯一性约束DEFAULT默认值约束，用于设置字段的默认值2.4.1主键约束;注意:每个数据表中最多只能有一个主键约束,定义为primarykey的字段不能有重复值且不能为null值1.单字段约束语法:字段名数据类型PRIMARYKEY例如:创建一个数据表ex1,并设置id作为主键,SQL语句如下:CREATETABLEex1(idINTPRIMARYKEY,nameVARCHAR(20),gradeFLOAT);2.多字段主键语法:PRIMARYKAY(字段名1,字段名2,***字段名n)例如:创建一个数据表ex2,在表中将stu_id和course_id两个字段共同作为主键,SQL语句如下:CREATETABLEex2(stu_idINT,course_idFLOAT,PRIMARYKEY(stu_id,course_id));2.4.2非空约束非空约束指的是字段的值不能为null,在MySQL中,非空约束是通过NOTNULL定义的;语法:字段名数据类型NOTNULL;例如:CREATETABLEex1(idINTPRIMARYKEY,nameVARCHAR(20)NOTNULL,gradeFLOATnotnull);2.4.3唯一约束保证数据表中字段的唯一性,即表中字段的值不能重复出现语法:字段名数据类型UNIQUE;CREATETABLEex1(idINTPRIMARYKEY,nameVARCHAR(20)NOTNULL,gradeFLOATUNIQUE);ID为主键,name的字段不能为空值,grade字段为唯一值,该值不能重复2.4.4默认约束用于给数据表中的字段添加指定默认值语法:字段名数据类型DEFAULT默认值;例如:CREATETABLEex1(idINTPRIMARYKEY,nameVARCHAR(20)NOTNULL,gradeFLOATdefault0/*默认值为0*/);2.5设置表的字段值自动增加在数据表中，若想为表中插入的新记录自动生成唯一的ID，可以使用AUTO_INCREMENT约束来实现。AUTO_INCREMENT约束的字段可以是任何整数类型，默认情况下，该字段的值是从1开始自增的语法:字段名数据类型AUTO_INTCREMENT;例如:创建一个数据表ex5,将表中的id字段设置为自动增加,SQL语句如下:CREATETABLEex1(idINTPRIMARYKEYAUTO_INCREMENT,nameVARCHAR(20)NOTNULL,gradeFLOATUNIQUE);2.6索引2.6.1索引的概念数据库的索引好比新华字典的音序表，它是对数据库表中一列或多列的值进行排序后的一种结构，其作用就是提高表中数据的查询速度1.普通索引普遍索引是由KEY或INDEX定义的索引，它是MySQL中的基本索引类型,可以创建在任何数据类型中，其值是否唯一和非空由字段本身的约束条件所决定。2.唯一性索引唯一性索引是由UNIQUE定义的索引,该索引所在字段的值必须是唯一的。3.全文索引/文本/全文索引是由FULLTEXT定义的索引，它只能创建在CHAR、VARCHAR或TEXT类型的字段上,而且,现在只有MyISAM存储引擎支持全文索引。4.单列索引单列索引指的是在表中单个字段上创建索引，它可以是普通索引、唯一索引或者全文索引,只要保证该索引只对应表中一个字段即可。5.多列索引多列索引指的是在表中多个字段.上创建索引，只有在查询条件中使用了这些字段中的第一个字段时,该索引才会被使用。6.空间索引空间索引是由SPATIAL定义的索引，它只能创建在空间数据类型的字段上。创建时必须声明为notnull,并且只有MyISAM存储引擎支持2.6.2创建索引&gt;1.创建表的时候创建索引语法:CREATETABLE表名(字段名数据类型[完整性约束条件],字段名数据类型[完整性约束条件],...字段名数据类型[UNIQUE|FULLTEXT|SPATIAL]INDEX|KEY[别名](字段名1[(长度)][ASC|DESC]));UNIQUE:可选参数，表示唯一索引FULLTEXT:可选参数，表示全文索引SPATIAL:可选参数，表示空间索引INDEX和KEY:用来表示字段的索引，二者选一即可ASC和DESC可选参数，ASC表示升序排列，DESC表示降序排列别名:可选参数，表示创建的索引的名称字段名1:指定索引对应字段的名称，长度:可选参数，用于表示索引的长度&gt;1.创建普通索引mysql&gt;createtablet2(-&gt;idint(11),-&gt;namevarchar(20),-&gt;gradefloat,-&gt;indexindex(idasc)/*创建名为index的索引,升序排列*/-&gt;);建立后,使用showcreatetable查看表的结构==showcreatetablet1\\G;t1\\G使排列有序为了查看索引是否被使用可以使用explain语句进行查看,SQL代码如下:explainselect*fromt1whileid=1\\G&gt;2.创建唯一性索引mysql&gt;createtablet2(-&gt;idint(11),-&gt;namevarchar(20),-&gt;gradefloat,-&gt;uniqueindexunique_id(idasc)/*在表中id字段上建立索引名为unique_id的唯一性索引,并且按照升序排序*/-&gt;);&gt;3.创建全文索引mysql&gt;createtablet1(-&gt;idint(11),-&gt;namevarchar(20),-&gt;gradefloat,-&gt;fulltextindexfulltext_name(name)-&gt;)engine=myisam;/*因为目前只有MyISAM存储引擎支持全文索引*/&gt;4.创建单列索引mysql&gt;createtablet4(-&gt;namevarchar(20)notnull,-&gt;scorefloat,-&gt;indexsingle_name(name(20))/*在name字段上创建一个名叫single_name的单列索引索引长度为20*/-&gt;);&gt;5.创建多列索引mysql&gt;createtablet5(-&gt;idintnotnull,-&gt;namevarchar(20)notnull,-&gt;scorefloat,-&gt;indexmulti(id,name(20))/*在id和name字段上创建一个名叫multi的多列索引*/-&gt;);注意:在多列索引中,只有查询条件中使用了这些字段的第一个字段时多列索引才会被使用&gt;6.创建空间索引mysql&gt;createtablet6(-&gt;idint,-&gt;spacegeometrynotnull,-&gt;spatialindexsp(space)/*在space字段上建立一个名为sp的空间索引*/-&gt;)engine=myisam;注意:创建空间索引时,所在字段不能为空值,并且表的储存引擎为myisam2.使用CREATEINDEX语句在已经存在的表上创建索引语法CREATE[UNIQUE|FULLTEXT|SPATIAL]INDEX索引名ON表名(字段名[(长度)][ASC|DESC]);mysql&gt;createtablebook(-&gt;bookidintnotnull,-&gt;booknamevarchar(255)notnull,-&gt;authorsvarchar(255)notnull-&gt;infovarchar(255)null,-&gt;commentvarchar(255)null,-&gt;publicyearyearnotnull-&gt;);&gt;1.创建普通索引mysql&gt;createindexindex_idonbook(bookid);/*在book表中的bookid字段上建立一个名为index_id的普通索引*/mysql&gt;showcreatetablebook\\g;/*查看数据表结构*/&gt;2.创建唯一性索引createuniqueindexuniqueidxonbook(bookid);/*在bookid字段上创建一个名为uniqueidx的唯一性索引*/&gt;3.创建单列索引createindexsingleidxonbook(comment);/*在comment字段上创建一个名称为singleidx的单列索引*/&gt;4.创建多列索引createindexmulitidxonbook(authors(20)),info(20));/*在authors和info字段上创建一个名称为mulitidx的多列索引*/&gt;5.创建全文索引createfulltextindexfulltextidxonbook(info);/*在info字段上创建名为fulltextidx的全文索引*/&gt;6.创建空间索引createtablet7(ggeometrynotnull)engine=myisam;createspatailindexspatidxont7(g);/*在g字段上创建名称为spatidx的空间索引*/3.使用ALTERTABLE语句在已经存在的表上创建索引语法:ALTERTABLE表名ADD[UNIQUE|FULLTEXT|SPATIAL]INDEX索引名(字段名[(长度)][ASC|DESC])createtablebook(bookidintnotnull,booknamevarchar(255)notnull,authorsvarchar(255)null,commentvarchar(255)null,pubblicyearyearnotnull);&gt;1.创建普通索引altertablebookaddindexid(bookid);&gt;2.创建唯一性索引altertablebookadduniqueuniqueidx(bookid);&gt;3.创建单列索引altertablebookaddindexsingleidx(comment(50));&gt;4.创建多列索引altertablebookaddindexmultidx(authors(20),info(50));&gt;5.创建全文索引altertablebookaddfulltextindexfulltextidx(info);&gt;6.创建空间索引createtablet8(spacegeometrynotnull)engine=myisam;altertablet8addspatialindexspatidx(space);2.6.3删除索引&gt;1.使用altertable删除索引语法:altertable表名dropindex索引名;例如:删除表book中名叫fulltextidx的全文索引altertablebookdropindexfulltextidx;&gt;2.使用dropindex删除索引语法:dropindex索引名on表名;3.1添加数据&gt;3.1.1为表中所有字段添加数据;&gt;1.insert语句中指定所有字段名向表中添加新记录时,可以在insert语句中列出表中的所以字段名;注意:必须列出表中所以的字段名称,&quot;值1,值2,..&quot;的顺序,类型必须与对应的字段相匹配语法:insertinto表名(字段名1,字段名2,...)values(值1,值2,...);验证数据是否成功使用select语句查看student表中的数据select*from表名;&gt;2.insert语句中不指定字段名注意:由于insert语句中没有指定字段名,添加的值的顺序必须和字段在定义的顺序相同语法:insertinto表名values(值1,值2,...);&gt;3.1.2为表中指定的字段添加数据语法:insertinto表名(字段1,字段2,...)values(值1,值2)&gt;3.1.3同时添加多条记录语法:insertinto表名[(字段名1,字段名2,...)]values(值1,值2,...),(值1,值2,...),(值1,值2,...);例如:向student表中添加三条新纪录,insert语句如下:mysql&gt;insertintostudentvalues-&gt;(6,'lilei',99),-&gt;(7,'hanmeimei',100),-&gt;(8,'poly',40.5);3.2更新数据语法:update表名set字段名1=值1[,字段2=值2,...][where条件表达式]&gt;1.update更新部分数据例如:更新student表中id字段值为1的记录,将记录中的name字段的值更改为'caocao',grade字段的值更改为50;mysql&gt;updatestudent&gt;setname='caocao',grade=50&gt;whereid=1&gt;2.update更新全部数据例如:将student表中全部记录,将grade字段值都变为100:&gt;updatestudent&gt;setgrade=1003.3删除数据deletefrom表名[where条件表达式]&gt;1.删除部分数据&gt;deletefrom表名&gt;where条件表达式例如:删除表student上id字段上小于4的记录&gt;deletefromstudent&gt;whereid&lt;4;&gt;2.删除全部数据&gt;1.deletedeletefrom表名;&gt;2.truncatetruncatefrom表名;区别:delete语句后跟where子句,可以删除部分记录,truncate只能删除表中全部记录delete语句删除数据后,再次向表中增加记录时,自动增加字段的值为删除时该字段的最大值加1,truncate语句删除数据后,自动字段的默认初始值重新由1开始;4.1简单查询&gt;4.1.1select语句语法//顺序不能颠倒mysql&gt;&gt;select[distinct]*|字段名1,字段名2,字段名3,...&gt;from表名&gt;[where条件表达式1]&gt;[groupby字段名[having条件表达式2]]&gt;[orderby字段名[asc|desc]]&gt;[limit[offset]记录数]&gt;4.1.2查询所有字段&gt;1.在select语句中指定所有字段语法:select字段名1,字段名2,...from表名&gt;2.在select语句中使用星号(*)通配符代替所有字段select*from表名&gt;4.1.3查询指定字段语法:select字段名1,字段名2,...from表名;4.2按条件查询&gt;4.2.1带关系运算符查询where子句中指定查询条件对数据进行过滤语法:select字段名1,字段名2,...from表名where条件表达式&gt;4.2.2带in关键字的查询in关键字用于判断某个字段的值是否在指定集合中语法:select*|字段名1,字段名2,...from表名where字段名[not]in(元素1,元素2)&quot;元素1,元素2&quot;表示集合中的元素,即指定的条件范围not为可选参数,使用not表示查询不在in关键字指定集合范围的记录例如:查询student表中ID值为1,2,3的记录mysql&gt;selectid,grade,name,gradefromstudentwhereidin(1,2,3);&gt;4.2.3带betweenand关键字查询betweenand用于判断某个字符的值是否在指定的范围之内,如果字段的值在指定的范围内,则满足条件select*|{字段名1,字段名2,...}from表名where字段名[not]between值1and值2例如:查询student表中id值在2~5之间的学生姓名mysql&gt;selectid,namefromstudentwhereidbetween2and5;&gt;4.2.4空值查询在数据表中,某些列的值可能为空值(null),空值不同于0,也不同于空字符串在mysql中,使用isnull关键字来判断是否为空值语法:select*|字符段1,字符段2,...from表名where字段名is[not]null;例如:查询Student表中gender为空值的记录mysql&gt;selectid,name,grade,genderfromstudentwheregenderisnull;&gt;4.2.5带distinct关键词的查询很多表中某些字段的数据存在重复的值,使用distinct过滤重复记录的字段例如:在student表中查询gender(性别)字段的值,查询记录不能重复;mysql&gt;selectdistinctgenderfromstudent;distinct关键字作用于多个字段,如果字段名1字段名2里的值都相同才被认为是重复记录语法:selectdistinct字段名1,字段名2,...from表名;&gt;4.2.6带like关键字的查询使用关系运算符&quot;=&quot;可以判断两个字符串是否相等,但有些需要是对字符串进行模糊查询select*|{字符段1,字符段2,...}from表名where字段名[not]like'匹配字符串';1.百分号(%)通配符作用:匹配任意长度的字符串,包括空字符串例1:查询student表中name字段值以字符&quot;s&quot;开头的学生idmysql&gt;selectid,namefromstudentwherenamelike&quot;s%&quot;;例2:查询student表中name字段值以字符&quot;w&quot;开头,以字符&quot;g&quot;结束的学生idmysql&gt;selectid,namefromstudentwherenamelike&quot;w%g&quot;;例3:查询student表中name字段值包括字符&quot;y&quot;的学生id;mysql&gt;selectid,namefromstudentwherenamelike&quot;%y%&quot;;2.下划线(_)通配符作用:下划线通配符只能匹配单个字符,如果需要匹配多个则需要使用多个下划线例1:查询student表中name字段值以字符串&quot;wu&quot;开始,以字符串&quot;ong&quot;结尾,并且两个字符串之间只有一个字符的记录mysql&gt;select*fromstudentwherenamelike&quot;wu_ong&quot;;例2:查询student表中name字符值包括7个字符,并且以字符串&quot;ing&quot;结尾的记录mysql&gt;select*fromstudentwherenamelike&quot;_______ing&quot;;3.使用百分号和下划线通配符进行查询操作作用:通过右斜线(&quot;\\&quot;)对百分号和下划线进行转义例如:&quot;%&quot;匹配百分号字符值,&quot;\\_&quot;匹配下划线字符值例如:查询student表中name字段值包括&quot;%&quot;的记录;mysql&gt;insertintostudent(name,grade,gender)-&gt;values('sun%er',95,'男');mysql&gt;select*fromstudentwherenamelike&quot;%\\%%&quot;;&gt;4.2.7带and关键字的多条件查询and关键字连接两个或以上查询条件例如:select*from表名where条件表达式1and条件表达式2[...and条件表达式n]查询student表中id字段值在1.2.3.4之中,name字符值以字符串'ng'结尾,并且grade字段值小于80的记录mysql&gt;selectid,name,grader,gender-&gt;fromstudent-&gt;whereidin(1,2,3,4)andnamelike'%ng'andgrade&lt;80;&gt;4.2.8带or关键字的多条件查询or关键字满足一个,可以连接两个或多个查询条件例如:查询student表中满足条件name字段值以字符'h'结束,或者gender字符值为'女',或者grade字段值为100的记录mysql&gt;selectid,name,grade,gender-&gt;fromstudent-&gt;wherenamelike'%h'orgender='女'orgrade=100;注意:or和and可以一起使用,and优先级高于or例如:查询student表中student字符值为'女'或者gender字符值为'男',并且gender字段值为100的学生姓名mysql&gt;selectname,grade,gender-&gt;fromstudent-&gt;wheregender='女'orgender='男'andgrade=100;4.3高级查询&gt;4.3.1聚合函数&gt;1.count()函数COUNT()函数用来统计记录的条数，其语法格式如下所示:SELECTCOUNT(*)FROM表名;例如:查询student表中一共有多少条记录mysql&gt;selectcount(*)fromstudent;&gt;2.sum()函数SUM()是求和函数，用于求出表中某个字段所有值的总和，其语法格式如下:SELECTSUM(字段名)FROM表名例如:求出student表中grade字段的总和mysql&gt;selectsum(grade)fromstudent7&gt;3.avg()函数AVG()函数用于求出某个字段所有值的平均值其语法格式如下所示:SELECTAVG(字段名)FROMstudent;例如:求出student表中grade字段的平均值&gt;selectavg(grade)fromstudent&gt;4.max()函数MAX()函数是求最大值的函数，用于求出某个字段的最大值，其语法格式如下所示:SELECTMAX(grade)FROMstudent;例如:求出student表中grade字段的最大值&gt;selectmax(grade)fromstudent&gt;5.min()函数MIN()函数是求最小值的函数，用于求出某个字段的最小值，其语法格式如下所示:SELECTMIN(grade)FROMstudent;例如:求出student表中grade字段的最小值&gt;selectmin(grade)fromstudent&gt;4.3.2对查询结果排序​从表中查询出来的数据可能是无序的,或者排列顺序不是用户期望的,为了使查询结果满足用户的要求,可以使用orderby​对查询结果进行排序,语法格式如下:使用ORDERBY对查询结果进行排序其语法格式如下所示:SELECT字段名1,字段名2,FROM表名ORDERBY字段名1[ASC|DESC]，字段名2[ASC|DESC]/*asc:升序,从小到大,desc:倒叙,从大到小*/例2:查询student表中的所有记录,按照gender字段的升序和grade字段的降序进行排序:mysql&gt;select*fromstudent-&gt;orderbygenderasc,gradedesc;==注意:==在按照指定字段进行升序排列时，如果某条记录的字段值为NULL，则这条记录会在第一条显示，这是因为NULL值可以被认为是最小值&gt;4.3.3分组查询&gt;1.单独使用groupby分组单独使用groupby关键词,查询的是每个分组的一条记录例如:查询student表中的记录,按照gender字段值进行分组select*fromstudentgroupbygender;查询结果是按照gender字段中的不同值进行分类的,查询结果只显示每个分组&gt;2.groupby和聚合函数一起使用gruopby和聚合函数一起使用可以统计出某个或者某些字段在一个分组中的最大值,最小值,平均值等例如:将student表中gender字段值进行分组查询,计算出每个分组中各有多少名学生selectcount(*),genderfromstudentgroupbygender;例如:将student表中gender字段值进行分组查询,计算出每个分组的总成绩,平均成绩,最高分,最低分selectsum(grade),avg(grade),max(grade),min(grade),genterfromstudent3groupbygenter;&gt;3.groupby和having关键词一起使用having关键字和where关键字的作用相同,都设置条件表达式对查询结果进行过滤,两者区别在于,having关键字后可以跟聚合函数,而where关键字不能例如:将student表中按照gender字段进行分组查询,查找grade字段值之和小于300的分组selectstudentsum(grade),genderfromstudentgroupbygenderhavingsum(grade)&lt;300&gt;4.3.4使用limit限制查询结果的数量查询数据时,可能会返回很多条记录,而用户需要的记录可能只是其中的一条或者几条,比如实现分页功能,每页显示10行信息,每次查询都需要查出10条记录格式:select字段名1,字段名2,...from表名limit[offset,]记录数//limit后可以跟两个参数,第一个参数offset表示偏移量,如果为0则从查询结果的第一条开始记录,偏移量为1则从查询结果中的第二条记录开始,以此类推;offset为可选值,如果不指定其默认值为0.第二个参数&quot;记录数&quot;表示返回查询记录的条数;例(1):查询Student表中的前四条记录select*fromstudentlimit4;//没有指定返回记录的偏移量,只指定了查询记录的条数4,因此返回结果从第一条开始,一共返回4条记录;例(2):查询student表中grade字段值从第五位到第八位的学生(从高到低)select*fromstudentgroupdesclimit4,4limit后面第一个参数表示偏移量位4,即从第五条开始查询,第二个参数表示一共返回4条记录,即从第五位到第8为学生&gt;4.3.5函数(列表)函数名称作用ABS(x)返回x的绝对值SQRT(x)返回x的非负2次方根MOD(xy)返回x被y除后的余数CEILING(x)返回x的绝对值FLOOR(z)返回x的绝对值ROUND(x,y)返回x的绝对值TRUNCATE(x)返回x的绝对值SIGN(x)2返回x的绝对值4.4为表和字段取别名&gt;4.4.1为表取别名在查询操作时,如果表名很长使用起来就不太方便,这时可以为表取一个别名,用这个别名来代替表的名称;语法:select*from表名[as]别名;as关键字用于指定表名的别名,它可以省略不写;例如:为student表起一个别名s,并查询student表中gender字段值为'女'的记录select*fromstudentasswheres.gender='女';studentass表示student表的别名为ss.gender表示student表中的gender字段;&gt;4.4.2为字段取别名为了让显示查询结果更加直观,可以为字段取一个别名select字段名[as]别名[,字段名[as]别名,...]from表名;例如:查询student表中的所有记录的name和grade字段值,并为这两个字段名起别名stu_name和stu_genter;select*fromnameasstu_name,graderasstu_genterfromstudent;5.1外键&gt;5.1.1什么是外键外键是指引用另一个表中的一列或多列,==被引用的列应该具有主键约束或唯一性约束.==外键用来建立和加强两个表数据之间的连接引入外键后,外键列只能插入参照列存在的值,参照列被参照的值不能被删除,这就确保了数据的参照完整性创建两个表,一个班级表(grade),一个学生表(student)createtablegrade(idint(4)notnullprimarykey,namevarchar(36));createtablestudent(sidint(4)notnullprimarykey,snamevarchar(36),gidint(4)notnull);学生表(student)中的gid是学生所在的班级id,是引入了班级表(grade)中的主键id,那么gid就可以作为表student的主键..被引用的表,即表grade是主表;引用外键的表,即表student是从表,两个表是主从关系.表student用gid可以连接表grade中的信息&gt;5.1.2为表中添加外键约束语法:altertable表名addconstraintFK_IDforeignkey(外键字段名)references主表表名(主键字段名);语句:altertablestudentaddconstraintFK_IDforeignkey(gid)referencesgrade(id);&gt;5.1.3删除外键约束在实际开发中,根据业务逻辑的需求,需要解除两个表的关联关系时,就需要删除外键约束语法:altertable表名dropforeignkey外键名;接下来,将表中student表的外键约束删除altertablestudentdropforeignkeyFK_ID;5.2操作关联表&gt;5.2.1关联关系1.多对一(外键定义在多端)一个部门可以有多个员工，而一个员工不能属于多个部门。在多对一的表关系中，应该将外键建在多的一方2.多对多(需定义中间表)一个老师可以教多个学生，同时一个学生可以上多个老师的课程。为了实现数据表多对多的关系，需要定义一张第三方中间表，该表保存两个关系表的外键。3.一对一(从表依赖主表)一对一的对应关系中，需要分清主从关系，通常在从表中建立外键&gt;5.2.2添加数据在开发中，最常见的关联关系就是多对一关系为表student和表grade中添加外键约束来建立两个表的关联关系altertablestudentaddconstraintFK_IDforeignkey(gid)referencesgrade(id);&gt;5.2.3删除数据由于grade表与student表之间具有关联关系,参照列被参照的值不能被删除的,再删除软件二班时需要删除软件二班的所有学生deletefromstudentwheresname='王红';deletefromstudentwheresname='李强';delete*fromgradewhereid=2;5.3连接查询&gt;5.3.1交叉连接交叉连接返回的结果是被连接的两个表中所有数据行的笛卡尔积即行数的乘积例如:department表中有4个部门,employee表中有4个员工,那么交叉连接的结果就有4X4=16条数据语法:select*from表1,表2;或select*from表1crossjoin表2;&gt;5.3.2内连接内连接（INNERJOIN）又称简单连接或自然连接，内连接使用比较运算符对两个表中的数据进行比较，列出与连接条件匹配的数据行，组合成新的记录简单连接或自然连接,返回的结果是两个表中一一对应的数据,只有满足条件的数据才显示语法:select查询字段from表1[inner]join表2on表1.关系字段=表2.关系字段例如:在department表和employee表之间使用内连接查询;selectemployee.name,department.dnamefromdepartmentinnerjoinemployeeondepartment.did=employee.did;//只有department.did和employee.did相等的才输出使用where条件语句来实现同样的功能;例如:在department表和employee表之间使用where:selectemployee.name,department.dnamefromdepartment,employeewheredepartment,did=employee.did;注意:where子句的查询结果与使用innerjoin的查询结果是一致的,虽然结果相同,但innerjoin是内连接语句,where是条件判断语句,在where语句后可以添加其他条件,而innerjoin语句不可以;如果在一个连接查询中,涉及的两个表是同一个表,这种查询称为自连接查询,指的是相互连接的表在物理上为同一个表,但逻辑上分为两个表查询部门为2的员工的姓名和年龄;selectdepartment.did,employee.name,employee.agefromdepartmentjoinemployeeondepartment.did=employee.didwheredepartment.did=2;或selectdepartment.did,employee.name,employee.agefromdepartment,employeewheredepartment.did=employee.didanddepartment.did=2;查询姓名为王红所在的部门编号和部门名称selectemployee.name,department.did,department.dnamefromdepartment,employeewheredepartment.did=employee.didandemployee.name='王红';自连接:例如:在department表和employee表之间使用自连接查询王红所在的部门有哪些员工;selectp1.*fromemployeep1innerjoinemployeep2onp1.did=p2.didwherep2.name='王红';/*p1p2为别名*/或selectp1.*fromemployeep1,employeep2wherep1.did=p2.didandp2.name='王红';/*where方法*/&gt;5.3.3外连接外连接分为左连接和有连接左连接的结果包括LEFTJOIN子句中指定的左表的所有记录，和所有满足连接条件的记录。如果左表的某条记录在右表中不存在，则在右表中显示为空;右连接与左连接正好相反，返回右表中所有指定的记录和所有满足连接条件的记录。如果右表的某条记录在左表中没有匹配，则左表将返回空值;做外链接:左表中的所有记录以及内连接的记录(放在前面的是左表)右外连接:右表中的所有记录以及内连接的记录语法:SELECT所查字段FROM表1LEFT|RIGHT[OUTER]JOIN表2ON表1.关系字段=表2.关系字段WHERE条件select*from表1,表2where表1.关系字段=表2.关系字段and其他条件&gt;全外连接查询在外连接的基础上,增加左边表有,右边表没有的记录,以及右边表有左边表没有的记录语法:select*from表1fulljion表二on表一.关系字段=表二.关系字段;select*fromdepfulljionempondep.did=em.did;&gt;5.3.4复合条件查询5.4子查询&gt;5.4.1带IN关键字的子查询使用in关键字进行子查询时,内层查询语句仅返回一个数列值,这个数列值中的值将供外层查询语句进行比较操作例如:查询存在年龄为20岁的员工的部门select*fromdepartmentwheredidin(selectdidfromemployeewhereage=20);或//子查询方法selectdepartment.did,department.dnamefromdepartmentjoinemployeeondepartment.did=employee.didwhereemployee.age=20;//内连接方法或selectdepartment.did,department.dnamefromdepartment,employeewheredepartment.did=employee.didandemployee.age=20;//where方法&gt;5.4.2带exists关键字的子查询exists关键字后面的参数可以是任意一个子查询,这个子查询的作用相当于测试,他不产生任何数据,只返回true或false,当返回值为true时,外层查询才会执行例如:查询employee表中是否存在年龄大于21岁的员工,如果存在,则查询department表中的所有记录select*fromdepartmentwhereexists(selectdidfromemployeewhereage&gt;21);&gt;5.4.3带any关键字的子查询any关键字表示满足其中任意一个条件,它允许创建一个表达式对子查询的返回值列表进行比较例如:select*fromdepartmentwheredid&gt;any(selectdidfromemployee);//列出只要大于employee.did任意一个数&gt;5.4.4带all关键字的子查询例如:select*fromdepartmentwheredid&gt;all(selectdidfromemployee);/列出大于employee.did所有的数&gt;5.4.5带比较运算符的子查询比较运算符&gt;,&lt;,=,&gt;=,&lt;=,!=例如:使用比较运算符的子查询,查询赵四是哪个部门的员工select*fromdepartmentwheredid=(selectdidfromemployeewherename=&quot;赵四&quot;);6.1事务管理&gt;6.1.1事务的概念所谓的事务就是针对数据库的一组操作，它可以由一条或多条SQL语句组成，同一个事务的操作具备同步的特点，即事务中的语句要么都执行，要么都不执行开启事务的语法:starttransaction上述语句用于开启事务,事务开启之后就可以执行SQL语句,SQL语句执行成功后,需使用相对应语句提交事务,语法如下:提交事务的语法:commit在操作一个事务时,如果发现当前事务中的操作是不合理的,此时只要还没有提交事务,就可以通过回滚来取消当前事务事务回滚语句:rollback6.2存储过程的创建&gt;6.2.1创建存储过程存储过程就是一条或多条SQL语句的集合，当对数据库进行一系列复杂操作时，存储过程可以将这些复杂操作封装成一个代码块，以便重复使用，大大减少数据库开发人员的工作量语法格式:CREATEPROCEDUREsp_name([proc_parameter])[characteristics…]routine_bodyCREATEPROCEDURE：为用来创建存储过程的关键字。sp_name:为存储过程的名称。proc_parameter:为指定存储过程的参数列表。characteristics:用于指定存储过程的特性。演示存储过程的创建1.首先创建一个student表:mysql&gt;createtablestudent(-&gt;idint(3)primarykeyauto_increment,-&gt;namevarchar(20)notnull,-&gt;gradefloat,-&gt;genderchar(2)-&gt;);2.插入数据mysql&gt;insertintostudent(name,grade,gender)-&gt;values('tom',60,'男'),-&gt;('jack',70,'男'),-&gt;('rose',90,'女'),-&gt;('lucy',100,'女');3.创建一个查看student表的存储过程创建一个存储过程proc,每次调用这个存储过程的时候都会执行select语句查看表的内容mysql&gt;delimiter//--------&gt;作用:将MySQL的结束符设置为//mysql&gt;createprocedureproc()-&gt;begin-&gt;select*fromstudent;-&gt;end//&gt;6.2.2变量的使用在MySQL中,变量可以在子程序中声明,用于保存数据处理过程中的值,这些变量的作用范围在BEGIN…END程序中语法格式:DECLAREvar_name[,varname]…date_type[DEFAULTvalue];例如:定义一个名称为v1的变量，类型为INT类型，默认值为100,查询这个变量的值mysql&gt;delimiter//mysql&gt;createprocedureproc2()-&gt;begin-&gt;declarev1intdefault100;-&gt;selectv1;-&gt;end//mysql&gt;delimiter;mysql&gt;callproc2();+------+|v1|+------+|100|+------+例如:声明三个变量,使用set为变量赋值mysql&gt;delimiter//mysql&gt;createprocedureproc2()-&gt;begin-&gt;declarev1,v2,v3int;-&gt;setv1=10,v2=20;-&gt;setv3=v1+v2;-&gt;selectv1,v2,v3;-&gt;end//QueryOK,0rowsaffected(0.00sec)mysql&gt;delimiter;mysql&gt;callproc2();+------+------+------+|v1|v2|v3|+------+------+------+|10|20|30|+------+------+------+1rowinset(0.00sec)QueryOK,0rowsaffected(0.00sec)除了使用set语句为变量赋值外,MySQL中还可以通过select...into为一个或多个变量赋值,该语句可以把选定的列直接储存到对应的位置的变量语法格式如下:selectcol_name[...]intovar_name[...]table_expr上述语法格式中,col_name表示字段名称;var_name表示定义的变量名称,table_expr表示查询条件表达式,包括表名称和where子句.例如:selectgrade,genderintos_grade,s_genderfromstudentwherename='rose';例:声明变量s_grade和s_gender,通过select...into语句查询指定记录并为变量赋值注意:查询时如果不执行selects_grade,s_gender;则无返回结果mysql&gt;delimiter//mysql&gt;createprocedureproc4()-&gt;begin-&gt;declares_gradefloat;-&gt;declares_genderchar(4);-&gt;selectgrade,genderintos_grade,s_genderfromstudentwherename='rose';-&gt;selects_grade,s_gender;-&gt;end//QueryOK,0rowsaffected(0.00sec)mysql&gt;callproc4()//+---------+----------+|s_grade|s_gender|+---------+----------+|90|女|+---------+----------+1rowinset(0.00sec)QueryOK,0rowsaffected(0.01sec)&gt;6.2.3定义条件和处理程序&gt;1.定义条件定义条件是指事先定义程序执行过程中遇到的问题。定义条件使用DECLARE语句，语法格式如下：DECLAREcondition_nameCONDITIONFOR[condition_type];//condition_type的两种形式：[condition_type]:SQLSTATE[VALUE]sqlstate_value|mysql_error_codecondition_name：表示所定义的条件的名称；condition_type：表示条件的类型；sqlstate_value和mysql_error_code：表示MySQL的错误，sqlstate_value是长度为5的字符串类型错误代码，mysql_error_code为数值类型的错误代码。例如：ERROR1142（42000）中，sqlstate_value的值是42000，mysql_error_code的值是1142例如//方法一:使用sqlstate_valuedeclarecommad_not_allowedconditionforsqlstate'42000';//方法二:使用mysql_error_codedeclarecommad_not_allowedconditionfor1064;&gt;2.定义处理程序处理程序定义了在程序执行过程中遇到问题时应当采取的处理方式，并且保证存储过程在遇到警告或错误时能继续执行处理过程使用DECLARE语句定义，语法格式如下:DECLAREhandler_typeHANDLERFORcondition_value[,…]sp_statementhandler_type:CONTINUE|EXIT|UNDOcondition_value://包括5个字符的字符串错误值;|condition_name//表示declarecondition定义的错误条件名称|SQLWARNING//匹配所有以01开头的sqlstate错误代码|NOTFOUND//匹配所有以02开头的sqlstate错误代码|SQLEXCEPTION//匹配所有没有被sqlwarning或notfound捕获的sqlstate错误代码|mysql_error_code//匹配数值类型错误代码handler_type：为错误处理方式，参数取值有3个：CONTINUE、EXIT和UNDO。CONTINUE：表示遇到错误不处理，继续执行；EXIT：遇到错误马上退出。UNDO：表示遇到错误后撤回之前的操作，MySQL中暂时不支持这样的操作。sp_statement：参数为程序语句段，表示在遇到定义的错误时，需要执行的存储过程。condition_value：表示错误类型例如://方法一:捕获sqlstate_valuedeclarecontinuehandlerforsqlstate'42S02'set@info='no_such_table';//方法二:捕获mysql_error_codedeclarecontinuehandlerfor1146set@info='no_such_table'//方法三:先定义条件,然后调用declarecontinuehandlerforno_such_tableset@info='error';//方法四:使用sqlwarningdeclareexithandlerforsqlwarningset@info='error';//方法五:使用notfounddeclareexithandlerfornotfoundset@info='no_such_table';//方法六:使用sqlexceptiondeclareexithandlerforsqlexceptionset@info='error';&gt;6.2.4光标的使用在编写存储过程时，查询语句可能会返回多条记录，如果数据量非常大，则需要使用光标来逐条读取查询结果集中的记录。光标是一种用于轻松处理多行数据的机制&gt;1.光标的声明想要使用光标处理结果集中的数据,需要先声明光标。光标必须声明在声明变量,条件之后语法:DECLAREcursor_nameCURSORFORselect_statementcursor_name表示光标的名称;select_statement表示select语句的内容,返回一个用于创建光标的结果集例如:声明一个名为cursor_student的光标DECLAREcursor_studentCURSORFORselects_name,s_genderFROMstudent;&gt;2.光标的使用首先要打开光标语法:opencursor_name;selectcursor_nameintovar_name[,var_name]...cursor_name表示参数的名称;var_name表示将光标中的select语句查询出来的信息存入该参数中,需要注意的是,var_name必须在声明光标之前就定义好例如:使用名称为cursor_student的光标,将查询出来的信息存入s_name和s_gender中fetchcursor_studentintos_name,s_gender;&gt;3.光标的关闭使用完光标后要将光标关闭,关闭光标的语法格式为closecursor_name;&gt;6.2.5流程控制的使用流程控制语句用于将多个sql语句划分或组合成符合业务逻辑的代码块&gt;1.if语句是指如果条件满足mysql&gt;delimiter//mysql&gt;createprocedureproc6()//定义一个存储过程;-&gt;begin//开始;-&gt;declarevarint;//定义一个变量var;-&gt;setvar=10;//设置var的值,可不设置;-&gt;ifvarisnull//if语句开始;-&gt;thenselect'valisnull';-&gt;elseselect'valisnotnull';-&gt;endif;//if语句结束;-&gt;end////结束;QueryOK,0rowsaffected(0.00sec)mysql&gt;delimiter;mysql&gt;callproc6();//查看+-----------------+|valisnotnull|+-----------------+|valisnotnull|+-----------------+1rowinset(0.00sec)QueryOK,0rowsaffected(0.00sec)&gt;2.case语句mysql&gt;delimiter//mysql&gt;createprocedureproc7()-&gt;begin-&gt;declarevarint;-&gt;setvar=1;-&gt;casevar-&gt;when1thenselect'valis1';-&gt;when2thenselect'valis2';-&gt;elseselect'valisnot1or2';-&gt;endcase;-&gt;end//QueryOK,0rowsaffected(0.00sec)mysql&gt;delimiter;mysql&gt;callproc7();+----------+|valis1|+----------+|valis1|+----------+1rowinset(0.00sec)QueryOK,0rowsaffected(0.01sec)&gt;3.loop语句loop循环语句用来重复执行某些语句,并不会进行条件判断。loop语句内的语句会一直重复执行直到跳出循环语句基本语法如下:[loop_label:]LOOP//loop_label表示loop语句的标记名称,该参数可以省略statement_list//statement_list表示需要循环执行的语句ENDLOOP[loop_label]&gt;4.leave语句当不满足循环条件时,需要用leave语句退出循环语法:leavelabel例如:mysql&gt;createprocedureproc8()-&gt;begin-&gt;declareidintdefault0;-&gt;add_loop:LOOP-&gt;setid=id+1;-&gt;ifid&gt;=10thenleaveadd_loop;-&gt;endif;-&gt;endLOOPadd_loop;-&gt;selectid;-&gt;end//QueryOK,0rowsaffected(0.00sec)mysql&gt;callproc8()//+------+|id|+------+|10|+------+1rowinset(0.00sec)QueryOK,0rowsaffected(0.01sec)&gt;5.iterate语句mysql&gt;delimiter//mysql&gt;createprocedureproc9()-&gt;begin-&gt;declarep1intdefault0;//p1初始值为0;-&gt;my_loop:loop-&gt;setp1=p1+1;-&gt;ifp1&lt;10theniteratemy_loop;//如果p1的值小于10是,重复执行p+1-&gt;elesifp1&gt;20thenleavemy_loop;//当p1的值大于或等于10并且小于20时-&gt;endif;-&gt;select'p1isbetween10and20';//当p1的值大于或等于10并且小于20时,打印&quot;p1isbet...&quot;-&gt;endloopmy_loop;-&gt;end//&gt;6.repeat语句作用:创建一个带有条件判断的循环过程,每次语句执行完毕后,会对条件表达式进行判断,如果表达式为真,则循环结束;否则重复执行循环中的语句语法:[repeat_lable:]repeat//repeat_label为repeat语句的标注名称,该参数可选statement_listutillexpr_condition//reapeat语句内的语句或语句群被重复,直至expr_condition为真endrepeat[repeat_lable]例如mysql&gt;createprocedureproc40()-&gt;begin-&gt;declareidintdefault0;-&gt;repeat//-&gt;setid=id+1;-&gt;selectid;//遍历1-10;-&gt;untilid&gt;=10---------&gt;&gt;不带分号-&gt;endrepeat;//-&gt;end//QueryOK,0rowsaffected(0.00sec)&gt;7.where语句作用:创建一个带条件判断的循环过程,与repeat不同的是,where在语句执行时,先对指定的表达式进行判断,如果为真,则执行循环内的语句,否则退出循环语法:[where_lable:]whereexpr_conditionDOStatement_listendwhere[where_lable]mysql&gt;createprocedureproc42()-&gt;begin-&gt;declareiintdefault0;-&gt;whilei&lt;10do-&gt;seti=i+1;-&gt;selecti;//遍历1-10;-&gt;endwhile;-&gt;end//QueryOK,0rowsaffected(0.01sec)6.3存储过程的使用&gt;6.3.1调用存储过程1.定义存储过程mysql&gt;createproceduretest2(ins_gendervarchar(50),outnumint)-&gt;begin-&gt;selectcount(*)intonumfromstudentwheregender=s_gender;-&gt;end//QueryOK,0rowsaffected(0.00sec)2调用存储过程mysql&gt;delimiter;mysql&gt;calltest2(&quot;女&quot;,@num);QueryOK,1rowaffected(0.01sec)3.查看返回结果mysql&gt;select@num;+------+|@num|+------+|2|+------+1rowinset(0.00sec)&gt;6.3.2查看存储过程&gt;1.showstatus语句中查看存储过程的状态mysql&gt;showprocedurestatuslike'proc%'\\G***************************1.row***************************Db:chapter06Name:procType:PROCEDUREDefiner:root@localhostModified:2020-11-2508:32:11Created:2020-11-2508:32:11Security_type:DEFINERComment:character_set_client:gbkcollation_connection:gbk_chinese_ciDatabaseCollation:utf8_general_ci***************************2.row***************************Db:chapter06Name:proc1Type:PROCEDUREDefiner:root@localhostModified:2020-11-2509:15:20Created:2020-11-2509:15:20Security_type:DEFINERComment:character_set_client:gbkcollation_connection:gbk_chinese_ciDatabaseCollation:utf8_general_ci&gt;2.showcreate语句中查看存储过程的状态&amp;创建语句mysql&gt;showcreateprocedurechapter06.proc1\\G***************************1.row***************************Procedure:proc1sql_mode:STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTIONCreateProcedure:CREATEDEFINER=`root`@`localhost`PROCEDURE`proc1`()beginselect*fromstudent;endcharacter_set_client:gbkcollation_connection:gbk_chinese_ciDatabaseCollation:utf8_general_ci1rowinset(0.00sec)&gt;3.从information_schema.Routine表中查看存储过程的信息mysql&gt;select*frominformation_schema.Routines-&gt;whereroutine_name='proc1'-&gt;androutine_type='procedure'\\G***************************1.row***************************SPECIFIC_NAME:proc1ROUTINE_CATALOG:defROUTINE_SCHEMA:chapter06ROUTINE_NAME:proc1ROUTINE_TYPE:PROCEDUREDATA_TYPE:CHARACTER_MAXIMUM_LENGTH:NULLCHARACTER_OCTET_LENGTH:NULLNUMERIC_PRECISION:NULLNUMERIC_SCALE:NULLCHARACTER_SET_NAME:NULLCOLLATION_NAME:NULLDTD_IDENTIFIER:NULLROUTINE_BODY:SQLROUTINE_DEFINITION:beginselect*fromstudent;endEXTERNAL_NAME:NULLEXTERNAL_LANGUAGE:NULLPARAMETER_STYLE:SQLIS_DETERMINISTIC:NOSQL_DATA_ACCESS:CONTAINSSQLSQL_PATH:NULLSECURITY_TYPE:DEFINERCREATED:2020-11-2509:15:20LAST_ALTERED:2020-11-2509:15:20SQL_MODE:STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTIONROUTINE_COMMENT:DEFINER:root@localhostCHARACTER_SET_CLIENT:gbkCOLLATION_CONNECTION:gbk_chinese_ciDATABASE_COLLATION:utf8_general_ci1rowinset(0.01sec)根据学号查询mysql&gt;delimiter//mysql&gt;createprocedureproc43(inmyidint)-&gt;begin-&gt;selectnamefromstudentwhereid=myid;-&gt;end//QueryOK,0rowsaffected(0.00sec)mysql&gt;delimiter;mysql&gt;callproc43(1);+------+|name|+------+|tom|+------+根据输入的ID从学生表中查询该ID对应的姓名,并输出姓名mysql&gt;delimiter//mysql&gt;createproceduretest1(inmyidint,outmynamevarchar(36))-&gt;begin-&gt;selectnameintomynamefromstudentwhereid=myid;-&gt;end//QueryOK,0rowsaffected(0.00sec)mysql&gt;delimiter;mysql&gt;calltest1(3,@myname);//调用存储过程QueryOK,1rowaffected(0.00sec)mysql&gt;select@myname;//查看返回结果+---------+|@myname|+---------+|rose|+---------+1rowinset(0.00sec)&gt;6.3.3修改存储过程在MySQL中可以使用alter语句修改存储过程语法格式如下:ALTER{PROCEDURE|FUNCTION}sp_name[characteristic…]sp_name：表示存储过程或函数的名称。characteristic：表示要修改存储过程的哪个部分characteristic的取值如下:1.containssql表示子程序中包括sql语句,但不包含读或写数据的语句;2.nosql表示子程序中不包括sql语句;3.readssqldata表示表示子程序中包括读数据的语句;4.modifiessqldata表示子程序中包括写数据的语句;5.sqlsecurity{definer|invoker}指明谁有权限来执行;6.definer表示只有定义者自己才能执行;7.invoker表示调用者可以执行;8.comment'string'表示注释信息;注意:目前此版本Mysql还不提供对已存在的存储过程代码的修改,如果一定要修改存储过程代码,必须先将存储过程删除之后,再重新编写代码,或创建一个新的存储过程&gt;6.3.4删除存储过程在MySQL中使用DROP语句修改存储过程，语法如下:DROP{procedure|function}[ifexists]sp_nameifexists表示如果程序不存在,它可以避免发生错误,产生一个警告7.1视图概述​视图是从基本表中导出来的表，是一种虚拟存在的表,并且表的结构和数据都依赖于基本表通过视图不仅可以看到放在基本表中的数据,并且还可以像操作基本表一样,对视图中存放的数据进行查询删除,修改.与直接操作表相比视图具有以下优点:1.简化查询语句日常开发中我们可以将经常使用的查询定义为视图，从而使用户避免大量重复的操作。2安全性通过视图用户只能查询和修改他们所能见到的数据，数据库中的其他数据则既看不到也取不到。3逻辑数据独立性视图可以帮助用户屏蔽真实表结构变化带来的影响。7.2视图管理&gt;7.2.1创建视图的语法格式:create[orreplace][algorithm={undefined|merge|temptable]viewview_name[(column_list)]asselect_statement[where[cascaded|local]checkoption]CREATE：表示创建视图的关键字。ORREPLACE：表示该语句能够替换已有视图。ALGORITHM：可选，表示视图选择的算法。UNDEFINED：表示MySQL将自动选择所要使用的算法。MERGE：使得视图定义的某一部分取代语句的对应部分。TEMPTABLE：表示将视图的结果存入临时表，然后使用临时表执行语句。view_name：表示要创建的视图名称。column_list：可选，表示属性清单。AS：表示指定视图要执行的操作。SELECT_statement：表示从某个表或视图中查出满足条件的记录，并导入视图中。WITHCHECKOPTION：可选，表示创建视图时要保证在该视图的权限范围之内。CASCADED：需要满足跟该视图有关的所有相关视图和表的条件，该参数为默认值。LOCAL：可选。表示创建视图时，只要满足该视图本身定义的条件即可。&gt;7.2.2在单标上创建视图在student表上创建view_stu视图和view_stu2视图(自定义字段名)1.创建数据库,表,插入数据mysql&gt;createdatabasechapter07;QueryOK,1rowaffected(0.04sec)mysql&gt;usechapter07Databasechangedmysql&gt;createtablestudent(-&gt;s_idint(3),-&gt;namevarchar(20),-&gt;mathfloat,-&gt;chinesefloat-&gt;);QueryOK,0rowsaffected(0.05sec)mysql&gt;insertintostudent(s_id,name,math,chinese)values-&gt;(1,'Tom',80,78),-&gt;(2,'Jack',70,80),-&gt;(3,'Lucy',97,95);QueryOK,3rowsaffected(0.05sec)Records:3Duplicates:0Warnings:0mysql&gt;select*fromstudent;+------+------+------+---------+|s_id|name|math|chinese|+------+------+------+---------+|1|Tom|80|78||2|Jack|70|80||3|Lucy|97|95|+------+------+------+---------+3rowsinset(0.00sec)2.创建视图并查询mysql&gt;createviewview_stuasselectmath,chinese,math+chinesefromstudent;mysql&gt;select*fromview_stu;+------+---------+--------------+|math|chinese|math+chinese|+------+---------+--------------+|80|78|158||70|80|150||97|95|192|+------+---------+--------------+3rowsinset(0.00sec)mysql&gt;createviewview_stu2(math,chinese,sum)asselectmath,chinese,math+chinesefromstudent;QueryOK,0rowsaffected(0.02sec)mysql&gt;select*fromview_stu2;+------+---------+------+|math|chinese|sum|+------+---------+------+|80|78|158||70|80|150||97|95|192|+------+---------+------+3rowsinset(0.00sec)&gt;7.2.3在多表上创建视图在student表和stu_info表中创建stu_class视图,查询s_id号,姓名和班级1.创建数据库,表,插入数据mysql&gt;createtablestu_info(-&gt;s_idint(3),-&gt;classvarchar(50),-&gt;addrvarchar(100)-&gt;);QueryOK,0rowsaffected(0.01sec)mysql&gt;insertintostu_info(s_id,class,addr)values-&gt;(1,'erban','anhui'),-&gt;(2,'sanban','chongqing'),-&gt;(3,'yiban','shandong');QueryOK,3rowsaffected(0.01sec)Records:3Duplicates:0Warnings:0mysql&gt;select*fromstu_info;+------+--------+-----------+|s_id|class|addr|+------+--------+-----------+|1|erban|anhui||2|sanban|chongqing||3|yiban|shandong|+------+--------+-----------+3rowsinset(0.00sec)2.创建视图并查询mysql&gt;createviewstu_class(id,name,class)asselectstudent.s_id,student.name,stu_info.classfromstudent,stu_infowherestudent.s_id=stu_info.s_id;QueryOK,0rowsaffected(0.02sec)mysql&gt;select*fromstu_class;+------+------+--------+|id|name|class|+------+------+--------+|1|Tom|erban||2|Jack|sanban||3|Lucy|yiban|+------+------+--------+3rowsinset(0.00sec)&gt;7.2.4查看视图&gt;1.使用describe语句查看视图作用:使用DESCRIBE语句可以查看视图的字段信息语法:DESCRIBE视图名;或DESC视图名;例如:desc[describe]stu_class;&gt;2.使用showtablestatus作用:可以查看视图的基本信息语法:SHOWTABLESTATUSLIKE'视图名';----&gt;注意like引号例如:showtablestatuslike'stu_class'\\G;&gt;3.使用showcreateview作用:不仅可以查看创建视图时的定义语句，还可以查看视图的字符编码语法:SHOWCREATEVIEW视图名;例如:showcreateviewstu_class\\G;&gt;7.2.5修改视图&gt;1.使用createorreplaceview语句修改视图;语法:createorreplaceview视图名asselect表中字段from表名createorreplaceviewview_stuasselect*fromstudent;&gt;2.使用alter语句修改视图;语法:alterview视图名asselect表中字段from表名alterviewview_stuasselectchinesefromstudent;&gt;7.2.6更新视图1.使用update语句更新视图updateview_stusetchinese=100;2.使用insert语句更新视图insertintostudentvalues(4,'Lily',100,100);3.使用delete语句更新视图deletefromview_stu2wheremath=10;7.2.7删除视图视图不在需要时,可以将其删除,删除视图只会删除视图的定义,不会删除数据.删除一个或多个视图可以使用dorpview语句,删除视图的基本语法格式如下所示:dropview[ifexists]view_name[,view_name1]...[restrict|cascade]view_name是指要删除的视图的名称,视图名称可以添加多个,各个名称用逗号隔开,删除视图必须有root权限例如:删除view_stu2视图dropviewifexistsview_stu2;8.1数据备份与还原8.1.1数据的备份通过MySQL的mysqldump命令实现数据的备份1.备份单个数据库mysqldump命令备份数据库的语法格式如下:mysqldump-uusername-ppassworddbname[tbname][tbname2...]&gt;filename.sql上述语法格式中,-u后面的参数username表示用户名,-p后面的参数password表示登录密码,dbname表示需要备份的数据库的名称,tbname表示数据库中的表名,可以指定一个表或多个表,多个表之间用空格隔开,如果不指定则备份整个数据库,filename.sql表示备份文件的名称,文件名前可以加上绝对路径注意:在使用mysqldump命令备份数据库时,直接在dos命令行窗口中执行该命令即可,不需要登录到mysql数据库例如:例如:创建一个名称为chapter08的数据库,并在数据库中创建表student,插入相应数据mysql&gt;createdatabasechapter08mysql&gt;usechapter08Databasechangedmysql&gt;createtablestudent(-&gt;idintprimarykeyauto_increment,-&gt;namevarchar(20),-&gt;ageint-&gt;);QueryOK,0rowsaffected(0.01sec)mysql&gt;insertintostudent(name,age)values-&gt;('Tom',20),-&gt;('Jack',16),-&gt;('Lucy',18);QueryOK,3rowsaffected(0.01sec)Records:3Duplicates:0Warnings:0mysql&gt;select*fromstudent;+----+------+------+|id|name|age|+----+------+------+|1|Tom|20||2|Jack|16||3|Lucy|18|+----+------+------+3rowsinset(0.00sec)首先在C盘创建一个名为backupdb的文件夹用来存备份好的文件夹,然后重新开启一个dos命令行窗口(不需要登录到MySQL数据库),使用mysqldump命令登录备份chapter08语法:C:\\Users\\ASUS&gt;mysqldump-uroot-pchapter08&gt;C:/backupdb/chapter08.sqlEnterpassword:****查看备份:--MySQLdump10.13Distrib5.5.28,forWin32(x86)----Host:localhostDatabase:chapter08----------------------------------------------------------Serverversion5.5.28/*!40101SET@OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT*/;/*!40101SET@OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS*/;/*!40101SET@OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION*/;/*!40101SETNAMESutf8*/;/*!40103SET@OLD_TIME_ZONE=@@TIME_ZONE*/;/*!40103SETTIME_ZONE='+00:00'*/;/*!40014SET@OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS,UNIQUE_CHECKS=0*/;/*!40014SET@OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS,FOREIGN_KEY_CHECKS=0*/;/*!40101SET@OLD_SQL_MODE=@@SQL_MODE,SQL_MODE='NO_AUTO_VALUE_ON_ZERO'*/;/*!40111SET@OLD_SQL_NOTES=@@SQL_NOTES,SQL_NOTES=0*/;----Tablestructurefortable`student`--DROPTABLEIFEXISTS`student`;/*!40101SET@saved_cs_client=@@character_set_client*/;/*!40101SETcharacter_set_client=utf8*/;CREATETABLE`student`(`id`INT(11)NOTNULLAUTO_INCREMENT,`name`VARCHAR(20)DEFAULTNULL,`age`INT(11)DEFAULTNULL,PRIMARYKEY(`id`))ENGINE=INNODBAUTO_INCREMENT=4DEFAULTCHARSET=utf8;/*!40101SETcharacter_set_client=@saved_cs_client*/;----Dumpingdatafortable`student`--LOCKTABLES`student`WRITE;/*!40000ALTERTABLE`student`DISABLEKEYS*/;INSERTINTO`student`VALUES(1,'Tom',20),(2,'Jack',16),(3,'Lucy',18);/*!40000ALTERTABLE`student`ENABLEKEYS*/;UNLOCKTABLES;/*!40103SETTIME_ZONE=@OLD_TIME_ZONE*/;/*!40101SETSQL_MODE=@OLD_SQL_MODE*/;/*!40014SETFOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS*/;/*!40014SETUNIQUE_CHECKS=@OLD_UNIQUE_CHECKS*/;/*!40101SETCHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT*/;/*!40101SETCHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS*/;/*!40101SETCOLLATION_CONNECTION=@OLD_COLLATION_CONNECTION*/;/*!40111SETSQL_NOTES=@OLD_SQL_NOTES*/;--Dumpcompletedon2020-12-168:30:502.备份多个数据库mysqldump–uusername–ppassword-–databasedbname1[dbname2dbname3…]&gt;filename.sql3.备份所以数据库mysqldump–uusername–ppassword-–all-databases&gt;filename.sql8.1.2数据的还原语法:mysql–uusername–ppassword[dbname]&lt;filename.sql1.删除数据库mysql&gt;dropdatabasechapter08;2.创建数据库mysql&gt;createdatabasechapter08;QueryOK,1rowaffected(0.01sec)3.还原数据库C:\\Users\\ASUS&gt;mysql-uroot-pchapter08&lt;C:/backupdb/chapter08-1.sqlEnterpassword:****4.查看数据mysql&gt;usechapter08Databasechangedmysql&gt;select*fromstudent;+----+------+------+|id|name|age|+----+------+------+|1|Tom|20||2|Jack|16||3|Lucy|18|+----+------+------+3rowsinset(0.00sec)8.2用户管理8.2.1user表在安装数据库的时候会自动安装一个名为mysql的数据库,该数据库中的表都是权限表,如user,db,host,table_priv其中user表是最重要的一个权限表,它记录了允许链接到服务器的账号信息以及一些全局级的权限信息,通过操作表就可以对这些信息进行修改mysql&gt;usemysqlmysql&gt;descuser;+------------------------+-----------------------------------+------+-----+---------+-------+|Field字段名|Type数据类型|Null|Key|Default|Extra|+------------------------+-----------------------------------+------+-----+---------+-------+|Host|char(60)|NO|PRI||||User|char(16)|NO|PRI||||Password|char(41)|NO|||||Select_priv|enum('N','Y')|NO||N|||Insert_priv|enum('N','Y')|NO||N|||Update_priv|enum('N','Y')|NO||N|||Delete_priv|enum('N','Y')|NO||N|||Create_priv|enum('N','Y')|NO||N|||Drop_priv|enum('N','Y')|NO||N|||Reload_priv|enum('N','Y')|NO||N|||Shutdown_priv|enum('N','Y')|NO||N|||Process_priv|enum('N','Y')|NO||N|||File_priv|enum('N','Y')|NO||N|||Grant_priv|enum('N','Y')|NO||N|||References_priv|enum('N','Y')|NO||N|||Index_priv|enum('N','Y')|NO||N|||Alter_priv|enum('N','Y')|NO||N|||Show_db_priv|enum('N','Y')|NO||N|||Super_priv|enum('N','Y')|NO||N|||Create_tmp_table_priv|enum('N','Y')|NO||N|||Lock_tables_priv|enum('N','Y')|NO||N|||Execute_priv|enum('N','Y')|NO||N|||Repl_slave_priv|enum('N','Y')|NO||N|||Repl_client_priv|enum('N','Y')|NO||N|||Create_view_priv|enum('N','Y')|NO||N|||Show_view_priv|enum('N','Y')|NO||N|||Create_routine_priv|enum('N','Y')|NO||N|||Alter_routine_priv|enum('N','Y')|NO||N|||Create_user_priv|enum('N','Y')|NO||N|||Event_priv|enum('N','Y')|NO||N|||Trigger_priv|enum('N','Y')|NO||N|||Create_tablespace_priv|enum('N','Y')|NO||N|||ssl_type|enum('','ANY','X509','SPECIFIED')|NO|||||ssl_cipher|blob|NO||NULL|||x509_issuer|blob|NO||NULL|||x509_subject|blob|NO||NULL|||max_questions|int(11)unsigned|NO||0|||max_updates|int(11)unsigned|NO||0|||max_connections|int(11)unsigned|NO||0|||max_user_connections|int(11)unsigned|NO||0|||plugin|char(64)|YES|||||authentication_string|text|YES||NULL||+------------------------+-----------------------------------+------+-----+---------+-------1.用户列用户列包括Host、User、Password,分别代表主机名、用户名和密码其中Host和User列为user表的联合主键当修改密码时，只需要修改,user表中Password字段的值即可2.权限列user表的权限列包括Select_priv、Insert_priv、Update_priv等以priv结尾的字段，这些字段决定了用户的权限，其中包括查询权限、修改权限、关闭服务等权限。3.安全列user表的安全列用于管理用户的安全信息，其中包括6个字段，具体如下：ssl_type和ssl_cipher：用于加密x509_issuer和x509_subject标准：可以用来标识用户plugin和authentication_string：用于存储与授权相关的插件4.资源控制列资源控制列是用于限制用户使用的资源，包括4个字段，具体如下：max_questions：每小时允许用户执行查询操作的次数max_updates：每小时允许用户执行更新操作的次数max_connections：每小时允许用户建立连接的次数max_user_connections：允许单个用户同时建立连接的次数8.2.2创建普通用户1.使用grant语句创建用户GRANTprivilegesONdatabase.tableTO'username'@'hostname'[IDENTIFIEDBY[PASSWORD]'password'][,'username'@'hostname[IDENTIFIEDBY[PASSWORD]'password']]…privileges参数表示该用户具有的权限信息,database.table表示新用户的权限范围表,可以在指定的数据库,表上使用自己的权限,username参数是新用户的名称,hostname参数是主机名,password参数是新用户的密码例如:使用grant语句创建一个新用户,用户名是user1,密码是123,并授予该用户对chapter08.student表具有查询权限grantselectonchapter08.studentto'user1'@'localhost'identifiedby'123';mysql&gt;selecthost,user,passwordfromuser;+-----------+-------+-------------------------------------------+|host|user|password|+-----------+-------+-------------------------------------------+|localhost|root|*81F5E21E35407D884A6CD4A731AEBFB6AF209E1B||localhost|user1|*23AE809DDACAF96AF0FD78ED04B6A265E05AA257||%|root|*81F5E21E35407D884A6CD4A731AEBFB6AF209E1B|+-----------+-------+-------------------------------------------+3rowsinset(0.00sec)2.使用createuser语句创建用户CREATEUSER'username'@'hostname'[IDENTIFIEDBY[PASSWORD]'password'][,'username'@'hostname'[IDENTIFIEDBY[PASSWORD]'password']]…username参数是新用户的名称,hostname参数是主机名,identifiedby关键字用于设置用户的密码,password表示用户的密码,[PASSWORD]关键字表示使用哈希值设置的密码,该参数是可选的,如果密码是一个普通的字符串,就不需要使用PASSWORD关键字例如:使用createuser语句创建一个新用户,用户名为user2,密码是123,createuser语法如下:createuser'user2'@'localhost'identifiedby'123';3.使用insert语句创建用户INSERTINTOmysql.user(Host,User,Password,ssl_cipher、x509_issuer、x509_subject)VALUES('hostname','username',PASSWORD('password'),'','','');上述语法格式中,mysql.user表示操作的表,Host,User,Password,ssl_cipher、x509_issuer、x509_subject为相应字段PASSWORD()是一个加密函数,用于给密码加密注意:使用insert添加用户时,通常只需要添加host,user和password这三个字段即可,其他字段取默认值,但由于Host,User,Password,ssl_cipher、x509_issuer、x509_subject字段是没有默认值的,因此insert语句创建用户时,还需要为这几个字段设置初始值例如:使用insert语句直接在mysql.user表中创建一个新用户,用户名为user3,密码为123,insert语句如下:insertintomysql.user(Host,User,Password,scl_cipher,x509_issuer,x509_subject)values('localhost','user3',password('123'),'','');注意:insert语句没有刷新权限表的功能,因此,user3用户暂时不能使用,为了让当前用户生效,还需要手动刷新当前的权限表或重新启动mysql服务,刷新权限表的语句如下:flushprivileges;8.2.3删除普通用户1.使用dropuser语句删除用户dropuser语句与dropdatabase语句有些相似,如果删除某个用户,只需在dropuser后面指定要删除的用户信息即可语法:dropuser'username'@'hostname'[,'username'@'hostname'];username表示要删除的用户,hostname表示主机名,dropuser语句可以同时删除一个或多个用户,多个用户之间可以使用逗号隔开注意:使用dropuser语句来删除用户时,必须拥有dropuser权限使用dropuser语句删除用户user1dropuser'user'@'localhost';2.使用delete语句删除用户delete语句不仅可以删除普通表中的数据,还可以删除user表中的数据,使用该语句删除user表中的数据时,只需要指定表名为mysql.user,以及要删除的用户信息即可,同样的,在使用delete语句时必须拥有对mysql.user表的delete权限语法格式如下:deletefrommysql.userwherehost='hostname'anduser='username';上述语法格式中,mysql.user参数指定要操作的表,where指定条件语句,host和user都是mysql.user表的字段,这两个字段可以确定唯一的一条记录例如:使用delete语句删除用户user2deletefrommysql.userwherehost='localhost'anduser='user2';注意:由于直接对user表进行操作,执行完命令后需要使用'flushprivileges'语句重新加载用户权限8.2.4修改用户密码1.修改root用户密码一.通过mysqladmin命令修改root用户的密码mysqladmin命令通常用于执行一些管理性工作语法格式如下:mysqladmin-uusername[-hhostname]-ppasswordnew_password;username为要修改的用户名,这里指的是root用户,参数-h用于指定对应的主机,可以省略不写,默认为localhost-p后面的password为关键字,而不是修改后的密码,new_password为新设置的密码注意:在使用mysqladmin命令修改root用户密码时,需要在C:\\documentandsetting\\administrator&gt;目录下进行修改例如:在命令行窗口中使用mysqladmin命令,将root用户的密码修改为mypwd1,sql语句如下:mysqladmin-uroot-ppasswordmypwd1二.通过update语句修改root用户的密码由于所以的用户信息都存放在mysql.user表中,因此,只有root用户登录到MySQL服务器,使用update语句就可以直接修改自己的密码语法格式如下updatemysql.usersetpassword=password('mypwd2')whereuser='root'andhost='localhost';上述语法执行成功后,还需要使用flushprivileges重新加载权限表,然后就可以使用新密码登录mysql数据库结果如下:三.使用set语句修改root用户的密码root用户登录到mysql数据库后,还可以通过set语句修改root用户的密码set语句修改密码的语法格式如下:setpassword=password('new_password');注意:由于set语句没有对密码加密的功能,因此,新密码必须使用password()函数加密,并且新密码需要使用引号括起例如:root用户登录到mysql数据库,使用set语句将root用户的密码修改为mypwd3,set语句如下:setpassword=password('mypwd3');2.root用户修改普通用户的密码1.使用grant语句修改普通用户密码grant语句的作用比较多,不仅可以创建用户授权,还可以修改用户的密码,通常情况下,为了不影响当前账户的权限,可以使用grantusage语句修改指定的账户的密码grant语句修改密码语法格式如下:grantusageon*.*to'username'@'localhost'identifiedby[password]'new_password';2.使用update语句修改普通用户的密码root用户具有操作数据库的所有权限,因此,它不仅可以使用update语句修改自己的密码,还可以使用update语句修改普通用户的密码update的语法格式为与root修改用户密码的语法格式相同updatemysql.usersetpassword=password('new_password')whereuser='username'andhost='hostname';注意:通过上述语句修改完普通用户的密码后,还需要使用flushprivileges语句重新加载权限表3.使用set语句修改普通用户的密码set不仅可以修改root用户的密码,而且还可以修改普通用户密码,在修改普通用户密码时,还需要增加一个for子句,指定要修改哪一个用户即可set语句修改密码的语法格式如下setpasswordfor'username'@'hostname'=password('new_password');3.普通用户修改密码普通用户也可以修改自己的密码,这样普通用户就不需要每次修改密码时都通知管理员,普通用户登录到MySQL服务器后,可以通过set语句来设置自己的密码set语句的基本格式如下:setpassword=password('new_password');set语句修改普通用户密码时,和修改root用户是一样的,都需要使用password()函数进行加密8.3权限管理8.3.1MySQL的权限Mysql中的权限信息被储存在mysql数据库的user,db,host,table_priv,column_priv和procs_priv表中,当MySQL启动时会自动加载这些权限信息,并将这些权限信息读取到内存中权限解释:1.create和drop的权限,可以创建数据库,表,索引,或者删除已有的数据库,表,索引2.insert,delete,update,select权限,可以对数据库中的表进行增删改查操作3.index权限,可以创建或删除索引,适用于所以的表4.alter权限.可以用于修改表的结构或重命名表5.grant权限,允许为其他用户授权,可用于数据库和表6.file权限,被赋予该权限的用户能读写MySQL服务器上的任何文件8.3.2授予权限我们之所以可以对数据进行增删改查的操作，是因为数据库中的用户拥有不同的权限，合理的授权可以保证数据库的安全MySQL中的GRANT语句可以为用户授权，语法格式如下:GRANTprivileges[(columns)][,privileges[(columns)]]ONdatabase.tableTO'username'@'hostname'[IDENTIFIEDBY[PASSWORD]'password'][,'username'@'hostname'[IDENTIFIEDBY[PASSWORD]'password']]…[WITHwith_option[with_option]…]privileges：表示权限类型。columns：参数表示权限作用于某一列，该参数可以省略不写，此时权限作用于整个表，username：表示用户名。hostname表示主机名。IDENTIFIEDBY：参数为用户设置密码。PASSWORD参数为关键字.password为用户的新密码。WITH关键字后面可以带有多个参数with_option，这个参数有五个取值具体如下:GRANTOPTION：将自己的权限授予其他用户MAX_QUERIES_PER_HOURcount：设置每小时最多可以执行多少次（count）查询。MAX_UPDATES_PER_HOURcount：设置每小时最多可以执行多少次更新。MAX_CONNECTIONS_PER_HOURcount：设置每小时最大的连接数量。MAX_USER_CONNECTIONS：设置每个用户最多可以同时建立连接的数量。8.3.3查看权限虽然使用SELECT语句可以查询user表中的权限信息，但是该语句需要指定用户和查询的权限，比较麻烦，MySQL还提供了一个查看权限的简单语句-SHOWGRANTS语句SHOWGRANTS的语法格式如下:SHOWGRANTSFOR'username'@'hostname';语法格式相对简单,只需要指定查询的用户名和主机名即可例1:使用showgrants语句查询root用户的权限信息showgrantsfor'root'@'hostname';例2:使用showgrants语句查询user4用户的权限信息showgrantsfor'user4'@'hostname';8.3.4收回权限为了保证数据库的安全性，需要将用户不必要的权限收回，收回用户权限使用REVOKE语句收回用户指定权限,语法格式如下所示:REVOKEprivileges[columns][,privileges[(columns)]]ONdatabase.tableFROM'username'@'hostname'[,'username'@'hostname']…revoke语法格式中的参数与grant语句中的参数意思相同,privileges参数表示收回的权限,columns表示权限作用于哪列上,如果不指定该参数表示作用于整个表使用revoke语句收回user4用户的insert权限,revoke语句如下:revokeinserton*.*from'user'@'localhost';如果权限比较多可以使用收回所以权限的功能收回用户全部权限,语法格式如下所示:REVOKEALLPRIVILEGES,GRANTOPTIONFROM'username'@'hostname'[,'username'@'hostname']…使用revoke语句收回user4用户的insert权限,revoke语句如下:revokeallprivileges,grantoptionfrom'user4'@'localhost';","link":"https://aoianz.github.io/post/mysql/"}]}